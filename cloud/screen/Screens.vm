## Resolver for Mutation.createScreen
#set($objectKey = ${context.arguments.input.objectKey})
{
    "version": "2018-05-29",
    "statements": [
        "INSERT INTO contents.screens VALUES ('$objectKey', NULL, NULL, NULL, NULL, 'init')",
        "SELECT objectKey FROM contents.screens WHERE objectKey = '$objectKey'"
    ]
}

$utils.toJson($utils.rds.toJsonObject($context.result)[1])

## Resolver for Mutation.setScreen
#set($objectKey = ${context.arguments.input.objectKey})
#set($createdDate = ${util.time.nowEpochMilliSeconds()})
#set($posterId = ${context.arguments.input.posterId})
#set($type = ${context.arguments.input.type})
#set($userCount = 0)
#set($status = 'complete')
{
    "version": "2018-05-29",
    "statements": [
        "UPDATE contents.screens SET createdDate = '$createdDate', posterId = '$posterId', type = '$type', userCount = '$userCount', status = '$status' WHERE objectKey = '$objectKey'",
        "SELECT objectKey FROM contents.screens WHERE objectKey = '$objectKey'"
    ]
}

$utils.toJson($utils.rds.toJsonObject($context.result)[1])

## Resolver for Mutation.changePosterId
{
    "version": "2018-05-29",
    "statements": [
        "UPDATE contents.screens SET posterId='Anonymous' WHERE posterId = '$context.arguments.input.posterId'",
        "SELECT posterId FROM contents.screens WHERE posterId = '$context.arguments.input.posterId' LIMIT 1"
    ]
}

$utils.toJson($utils.rds.toJsonObject($context.result)[1])

## Resolver for Mutation.deleteScreen
#set($objectKey = ${context.arguments.input.objectKey})
{
    "version": "2018-05-29",
    "statements": [
        "DELETE FROM contents.screens WHERE objectKey = '$objectKey'",
        "SELECT objectKey FROM contents.screens WHERE objectKey = '$objectKey'"
    ]
}

$utils.toJson($utils.rds.toJsonObject($context.result)[1])

## Resolver for Query.getStatus
{
    "version": "2018-05-29",
    "statements": [
        "SELECT status FROM contents.screens WHERE objectKey = '$context.arguments.input.objectKey'"
    ]
}

$utils.toJson($utils.rds.toJsonObject($context.result)[0])